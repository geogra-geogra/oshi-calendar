(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))r(e);new MutationObserver(e=>{for(const n of e)if(n.type==="childList")for(const s of n.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function a(e){const n={};return e.integrity&&(n.integrity=e.integrity),e.referrerPolicy&&(n.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?n.credentials="include":e.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function r(e){if(e.ep)return;e.ep=!0;const n=a(e);fetch(e.href,n)}})();function $(t,o){return t.filter(a=>{const r=new Date(a.date.split("/").join("-"));return o(r,a)})}function D(t,o){const a=document.createElement("div");let r=t.title,e="",n=!1;const s=t.character.split("/");let l="";return s.forEach(c=>{const i=o.find(d=>d.search===c.trim());l+=i?`<a href="../profile/${i.name}.html">${c}</a>/`:`${c}/`}),r=`<span class="${e}">${r}</span>`,l=l.slice(0,-1),a.innerHTML=`
    <h4>${r}</h4>
    ${l}<br>
    場所：${t.spot}
    ${t.lng&&t.lat?`<a href="https://www.google.co.jp/maps/?q=${t.lng},${t.lat}" target="_blank" rel="noopener noreferrer">(地図)</a>`:""}
    <br>
    ${t.remarks?`<span class="remarks">${t.remarks}</span><br>`:""}
    ${t.url1?`<a href="${t.url1}" target="_blank" rel="noopener noreferrer">参考記事</a><br>`:""}
    ${t.url2?`<a href="${t.url2}" target="_blank" rel="noopener noreferrer">参考記事2</a><br>`:""}
    <br>
    `,{element:a,isSpecial:n}}function v(t,o){const a=document.getElementById(t);fetch("../data/oshi.json").then(r=>{if(!r.ok)throw new Error("HTTP error "+r.status);return r.json()}).then(r=>{fetch("../data/schedule.json").then(e=>{if(!e.ok)throw new Error("HTTP error "+e.status);return e.json()}).then(e=>{a.innerHTML="";let n=null,s=$(e,o);if(s.length===0){a.innerHTML="予定はありません。";return}s.forEach(l=>{const c=new Date(l.date.split("/").join("-"));let i=!1;if(n!==l.date){n=l.date;const g="schedule-"+c.toISOString().split("T")[0].replace(/-/g,""),u=document.createElement("h3"),y=["日","月","火","水","木","金","土"],m=c.getDay(),E=y[m];u.id=g,u.textContent=n+" ("+E+")",a.appendChild(u)}const d=D(l,r);i=d.isSpecial;const h=d.element,p=c.toISOString().split("T")[0].replace(/-/g,""),f=document.getElementById(p);f&&f.classList.add(i?"hasSpecialEvent":"hasEvent"),a.appendChild(h)})}).catch(function(){console.log("Error loading JSON data.")})}).catch(function(){console.log("Error loading mascot JSON data.")})}function w(t){const o=new Date;return t.getFullYear()===o.getFullYear()&&t.getMonth()===o.getMonth()&&t.getDate()===o.getDate()}window.onload=function(){v("today-schedule",w)};
